# Запрашиватель выписки из ЭТК через Госуслуги

## Описание

Этот сервис автоматизирует получение выписки из электронной трудовой книжки с портала Госуслуг. Сервис реализует:
- автоматический вход на портал Госуслуг,
- обработку капчи и двухфакторной аутентификации,
- запрос выписки по ЭТК.

Обработка капчи и SMS-кода происходит через Telegram – пользователю прилетает запрос, он ответом на него высылает капчу
или код из SMS.

## Архитектура
- **Django** (ASGI) — основной backend
- **Celery** — обработка задач – отсылка в Telegram, сами запросы выписки
- **PostgreSQL** — база данных
- **Redis** — брокер сообщений для Celery

## Быстрый старт (Docker Compose)

1. **Создайте файл `.env` в корне проекта** и укажите:
```env
TELEGRAM_BOT_TOKEN=ваш_токен_бота
TELEGRAM_CHAT_ID=ваш_chat_id
```

2. **Запустите сервисы:**
```bash
docker compose up
```

3. **Запустите миграции:**
```bash
docker compose exec web python manage.py migrate
```

4. **Доступные эндпоинты:**

- `POST /etk_retriever/retrieve` (ставит задачу на получение выписки)

## Переменные окружения
- `TELEGRAM_BOT_TOKEN` — токен Telegram-бота
- `TELEGRAM_CHAT_ID` — chat_id для отправки капчи и SMS-кодов
